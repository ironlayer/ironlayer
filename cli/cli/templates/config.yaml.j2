# IronLayer project configuration
# Generated by `ironlayer init`

project:
  name: {{ project_name }}
  version: "0.1.0"

# State store: "local" (SQLite, no dependencies) or "postgres" (Docker/hosted)
state_store: {{ state_store }}

{% if state_store == "postgres" -%}
database:
  url: "postgresql+asyncpg://ironlayer:ironlayer_dev@localhost:5432/ironlayer"
  pool_size: 10
{% endif -%}

{% if databricks_host -%}
# Databricks connection (used for production execution)
databricks:
  host: "{{ databricks_host }}"
  warehouse_id: "{{ databricks_warehouse_id or '' }}"
  # Token is read from PLATFORM_DATABRICKS_TOKEN env var (never stored in config)
{% endif -%}

# AI advisory engine
ai:
  enabled: {{ ai_enabled | lower }}
{% if ai_enabled -%}
  url: "http://localhost:8001"
{% endif -%}

# Model discovery
models:
  path: "models"

# Execution defaults
execution:
  default_cluster_size: small
  max_retries: 3
  lookback_days: 30
